---
title: '再见微软，再见C# 之 正则表达式 -  基础知识'
tags:
  - 正则表达式
categories: []
toc: false
date: 2020-08-12 23:22:30
---

正则表达式语言可以识别各种字符模式。.NET中的正则表达式基于perl5的正则表达式，并且支持搜索和替换功能。
正则表达式一般用于处理以下问题：

- 验证文本输入。例如密码和电话号码（ASP.NET提供RegularExpressionVaildator控件就是为此二设计的）
- 将文本数据转化为结构化的 形式（例如从HTML页面中提取需要的数据并存储刀数据库中，就是我们所熟悉的网页爬虫。）
- 替换文档中特定模式的文本

所有的正则表达式相关类型都定义在System.Text.RegularExpressions命名空间中。
<!--more-->
# 定义正则表达式
下面列出了用于定义[正则表达式的各种类别的字符、运算符和结构。](正则表达式的各种类别的字符、运算符和结构。)

- 字符转义
- 字符类
- 定位点
- 分组构造
- 限定符
- 反向引用构造
- 备用构造
- 替换
- 杂项构造

![image.png](http://file.azing.cn/FslPvWgThu84EeZ9JOlyy0SP5MIc)
## Regex 类

Regex 类用于表示一个正则表达式。

下表列出了 Regex 类中一些常用的方法：
![image.png](http://file.azing.cn/FngxSAZOmJ4uQ4EyIh1gJDoJfhRi)

Regex.Match方法可以在一个大型字符串内进行搜索。其返回对象的属性即包含了匹配部分所在的位置（Index）和长度（Length），还包含了具体的匹配值Value。可以把 Regex.Match看作是string类型的IndexOf的增强版，前者搜索的是一种模式，而不是具体的字符或者字符串。默认情况下，正则表达式引擎按照从左到右的顺序对字符串进行匹配。
Regex.Matches方法则会返回一个包含所有匹配值的数组。

> 从.NET Framework 4.5开始，正则表达式支持在匹配操作中指定超时时间。如果匹配操作超出了指定的时间 间隔，就会抛出RegexMatch-TimeoutException。

## 编译正则表达式
上面的表格中是Regex的静态方法。实际上我们也可以实例化Regex对象，指定模式与RegexOptions.Complied选项，之后调用该对象的实例方法进行匹配。
RegexOptions.Compiled选项将会使Regex实例通过轻量级的代码生成器（Re-flection.Emit命名空间下的DynamicMethod）动态地构建并编译针对特定正则表达式的代码。这种方式能提高匹配速度，但是需要额外的编译开销。Regex的实例是不可变的
> 正则表达式引擎的执行速度是很快的。即使不进行编译，一个简单的匹配也能够在一毫秒之内完成。

RegexOptions枚举可以控制正则表达式的匹配行为
![image.png](http://file.azing.cn/FnsTToOPa8gsjVGkQ1Gjoj-UjjKn)